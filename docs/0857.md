# Cordova仓库

> 原文：<https://www.javatpoint.com/cordova-storage>

设计任何应用程序都会产生大量数据。这些数据是应用程序未来使用所必需的。因此，我们需要一个特定的存储区域来安全地保存这些有用的数据。Cordova 提供了几种存储数据的存储 API。为了增加应用的使用率，用户在离线时使用应用是有益的。这种存储 API 也可以提高应用程序的性能。

在这里，我们定义了各种存储 API，包括一些优点和缺点。您可以使用任何应用编程接口作为您需求的基础。此外，出于不同的目的，我们还可以在单个应用程序中使用几种不同的方法。

首先，我们将讨论本地存储:

## 本地存储:

几乎所有的移动应用程序都需要将数据存储在本地存储器中，因为您希望将数据存储在特定的位置，从那里可以方便地检索它们。因此，本地存储是存储有用数据的更好的地方。

HTML5 引入了在本地存储数据的新选项。我们可以结合插件提供的各种机制来使用 HTML5 存储。

它提供了一个简单的同步密钥/值对存储。本地存储由Cordova所有平台的网络视图实现支持。

### 使用本地存储的原因:

这里，我们定义了将数据存储在本地存储器中的一些原因:

*   应用程序是完全独立的。没有与其他用户进行任何交互，因此所有可用的数据都可以存储在本地存储中。
*   需要注意的是，对于像“**记住我**”这样的特定功能，我们必须要求将数据存储在本地存储器中。
*   通过将首选项设置存储在本地，我们可以跳过对服务器的不必要的调用。
*   通过在本地缓存其他数据，我们可以跳过对服务器的不必要的调用。
*   通过使用本地存储，我们还可以同步在线和离线数据，这样即使用户像 Evernote 一样离线，他们也可以继续使用应用程序。

我们可以将本地存储定义为最基本的存储选项，可以在用户浏览器中存储高达 **5MB** 的用户数据。

本地存储通常被认为是不可靠的存储，因为它的包装有点糟糕。我们可以使用浏览器的本地存储，因为它相当稳定和可靠，可以作为一个可行的存储选择。但是，它不适用于很多应用。背后的原因是数据可以被抹去。

一般来说，只有当数据丢失不是什么大问题时，才应该使用本地存储。不建议存储敏感数据，因为它很容易被访问。

本地存储可能是“记住我”类型功能的合适选项。因为万一数据丢失，什么都不会发生，我们只需要再次输入用户名和密码。

为了缓存来自服务器的数据，我们可以使用本地存储，因为万一数据丢失，可以再次从服务器获取数据。

请看下面的代码:

```

localStorage.setItem('set', 'off');
var set = localStorage.getItem('set');

```

上面的代码负责设置和检索本地存储数据。应该注意的是，很少有框架包含用于检索本地存储的内置方式。

#### 注意:本地存储只能存储字符串。我们需要将数据转换成 JSON 字符串，同时将对象或数组存储在本地存储中。检索数据后，我们可以将 JSON 字符串解码回数组或对象。

### 使用总结

我们可以使用**窗口访问本地存储。下面的代码显示了返回的存储对象公开的最重要的方法:**

```

var storage = window.localStorage;
// Pass key name to retrieve the value.
var value = storage.getItem(key);   
storage.set	Item(key, value) // To add or update the key, pass the key name and its value.
storage.removeItem(key) // To remove the key from storage, pass a key name 

```

### 优势

*   它得到了所有Cordova平台的支持。
*   因为简单同步的 API，所以很容易使用。

### 不足之处

*   复杂的数据结构必须序列化，因为它只存储字符串。正因为如此，我们只能存储那些可以序列化的数据。
*   数据量大时性能差。特别是:可用存储量有限(通常约 5MB)。
*   在 **iOS** 平台中，**本地存储**的数据可能会被清理，因为它将本地存储数据存储在操作系统可能清理的位置。

## web QL(web SQL)

我们可以使用网络 SQL 应用编程接口来存储和查询使用**数据库的数据。它可以存储 50-200 兆字节的数据。然而，确切的限制取决于平台。如果已经达到存储限制，那么如果需要，WebView 将授予用户使用更多本地空间的权限。**

您应该知道这个应用编程接口不是所有平台都支持的，但是如果您想使用它，您应该使用 WebSQl Cordova Plugin。

它由以下Cordova平台上的底层网络视图支持:

### 机器人

### ios

### 使用总结

我们需要使用 **window.openDatabase()** 方法来创建或打开数据库:

```

var db = window.openDatabase(name, version, displayName, estimatedSize);

```

### 参数:

**名称(字符串):**指将存储在磁盘中的数据库的唯一名称。

**版本(字符串):**定义数据库的版本。

**显示名称(字符串):**它提供了一个用户友好的数据库名称。当您需要向用户描述您的数据库时，将使用此名称。

**估计大小(数字):**它是指一个字节值，表示数据库的预期最大大小。当数据库大小增加时，我们需要获得许可。

## indexeddb

**IndexedDB** 结合了 WebSQL APIs LocalStorage 的优势。它允许你存储任意的 JavaScript 对象，用一个键索引。为了用户的利益，它还提供了 SQL 表的一些优点，而不限制结构或需要预先定义它。

我们可以将 IndexedDB 定义为像 LocalStorage 这样的简单数据模型。但是我们可以创建多个数据库，而不是 LocalStorage，在 local storage 中，每个数据库都有多个可用的存储。由于其搜索索引和异步应用编程接口，它提供了更好的性能。

简而言之，IndexedDB:

*   是面向对象的
*   异步存储和检索
*   提供关键价值存储

### 使用总结

*   IndexedDB 是异步存储，用户请求特定的数据库操作，DOM 事件通知结果。

您将在生成任何请求时获得一个请求对象。该对象提供两个事件，即**一个错误**和**成功**事件，以及各种属性，如就绪状态、结果和错误。

## 基于插件的选项

### 文件系统接口

如果我们谈论文件系统应用编程接口，它是一个 W3C 规范，是从 Chrome 浏览器实现的。该应用编程接口负责在本地文件系统上存储和检索数据。文件插件在所有Cordova平台上提供了广泛的实现。

### SQLite Plugin

现在，第二个插件选项是**SQlite 插件**，其中它的组成应用编程接口实际上与 WebSQL 相同。它们之间的区别如下:

*   实际上没有大小限制。
*   它在 Windows 平台的支持下可用。

以下是可用的变体:

**cordova-sqlite-storage** -它为安卓、iOS &视窗平台提供支持。定义核心版本，包括 sqlite3 实现。

**cordova-sqlite-ext** -它是一个扩展版本，由一些附加功能组成，例如对 iOS 和 Android 的 REGEXP 支持。

**Cordova-SQLite-free**-与 cordova-sqlite-ext 相同，具有改进的内存处理。它可以在 GPL v3 商业许可下获得。

* * *